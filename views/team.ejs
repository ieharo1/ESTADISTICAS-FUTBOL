<%- include('partials/header', { title }) %>

<div class="d-flex flex-column flex-lg-row gap-3 align-items-lg-center justify-content-between mb-4">
  <div>
    <h1 class="h3 mb-1">Vista por Equipo</h1>
    <p class="muted mb-0">Detalle de rendimiento, rachas y evolución temporal.</p>
  </div>
  <div class="d-flex gap-2">
    <label class="form-label mb-0 mt-2">Equipo</label>
    <select id="teamSelect" class="form-select">
      <% teams.forEach((team) => { %>
      <option value="<%= team._id %>"><%= team.name %> - <%= team.league %></option>
      <% }) %>
    </select>
  </div>
</div>

<section class="row g-3 mb-3" id="teamMetrics"></section>

<section class="row g-3">
  <div class="col-12 col-lg-7">
    <div class="card p-3">
      <h2 class="h6">Evolución del rendimiento</h2>
      <div id="trendChart" class="chart-box"></div>
    </div>
  </div>
  <div class="col-12 col-lg-5">
    <div class="card p-3 mb-3">
      <h2 class="h6">Racha reciente</h2>
      <div id="formDisplay" class="d-flex gap-2 fs-4"></div>
    </div>
    <div class="card p-3">
      <h2 class="h6">Mapa de calor de indicadores</h2>
      <div id="heatmapChart" class="chart-box"></div>
    </div>
  </div>
</section>

<script src="/js/team.js"></script>
<%- include('partials/footer') %>
